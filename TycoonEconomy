-- ( SERVER SCRIPT: TycoonEconomy - NO VISUALS )
-- Handles: Car Earnings Generation ONLY.
-- Update: Removed "addCashUI" because the user has custom billboards.

local ServerStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

local CarStats = require(ServerStorage:WaitForChild("CarStats"))
local TycoonFolder = Workspace:WaitForChild("Tycoons")

-- âš™ï¸ SETTINGS
local PAY_INTERVAL = 1 -- Seconds

-- ðŸ’° MAIN ECONOMY LOOP
-- This loop calculates money silently without creating any GUIs.
task.spawn(function()
	while true do
		task.wait(PAY_INTERVAL)
		
		for _, plot in pairs(TycoonFolder:GetChildren()) do
			local pendingValue = plot:FindFirstChild("PendingEarnings")
			local padsFolder = plot:FindFirstChild("Pads")

			if pendingValue and padsFolder then
				local plotTotalIncome = 0
				
				-- Scan all pads to calculate total earnings
				for _, pad in pairs(padsFolder:GetChildren()) do
					local linkedCar = pad:FindFirstChild("LinkedCar") and pad.LinkedCar.Value
					
					if linkedCar and linkedCar.Parent then
						local stats = CarStats.Cars[linkedCar.Name]
						if stats then
							plotTotalIncome = plotTotalIncome + stats.CPS
						end
					end
				end
				
				-- Deposit earnings to the "Pending" pile
				if plotTotalIncome > 0 then
					pendingValue.Value = pendingValue.Value + plotTotalIncome
				end
			end
		end
	end
end)

-- NOTE: The "setupPadListener" and "addCashUI" functions were deleted 
-- so the script no longer creates floating text on your cars.
