-- [[ LOCAL SCRIPT: BaseUpgradeClient ]]
-- Purpose: Waits for the Server signal and opens the BaseUpgradeUI.
-- Location: StarterPlayerScripts

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")
local Remotes = ReplicatedStorage:WaitForChild("ShopRemotes")

-- Wait for the specific remote to exist (created by the server script)
local OpenEvent = Remotes:WaitForChild("OpenBaseUpgrade")

-- ‚öôÔ∏è UI SETTINGS (Must match your Studio setup exactly)
local UI_NAME = "BaseUpgradeUI"
local FRAME_NAME = "MainFrame"
local CLOSE_BTN_NAME = "CloseButton"

-- üîì OPEN LOGIC
OpenEvent.OnClientEvent:Connect(function()
	local gui = PlayerGui:FindFirstChild(UI_NAME)
	if gui then
		local frame = gui:FindFirstChild(FRAME_NAME)
		if frame then
			gui.Enabled = true
			frame.Visible = true
			print("‚úÖ [Client] Base Upgrade UI Opened")
		else
			warn("‚ö†Ô∏è Frame '"..FRAME_NAME.."' not found in " .. UI_NAME)
		end
	else
		warn("‚ö†Ô∏è ScreenGui '"..UI_NAME.."' not found in PlayerGui")
	end
end)

-- üîí CLOSE LOGIC (Auto-connects when the UI loads)
task.spawn(function()
	local gui = PlayerGui:WaitForChild(UI_NAME, 10)
	if not gui then return end

	local frame = gui:WaitForChild(FRAME_NAME, 10)
	if not frame then return end

	local closeBtn = frame:WaitForChild(CLOSE_BTN_NAME, 10)
	if closeBtn then
		closeBtn.MouseButton1Click:Connect(function()
			gui.Enabled = false
			frame.Visible = false
		end)
	end
end)
