-- ( LOCAL SCRIPT: BankNavigation - SUFFIX UPDATE )
local Players = game:GetService("Players")
local SoundService = game:GetService("SoundService") 
local TweenService = game:GetService("TweenService") 
local player = Players.LocalPlayer
local gui = script.Parent 

-- ðŸ”Š CONFIG
local CLICK_SOUND_ID = "rbxassetid://9083627113" 
local DIM_COLOR = Color3.new(0.7, 0.7, 0.7) 

-- 1. FIND FRAMES & BUTTONS
local bankFrame = gui:FindFirstChild("BankFrame")
local transferFrame = gui:FindFirstChild("TransferFrame")
local openTransferBtn, backBtn, withdrawBtn

if bankFrame then openTransferBtn = bankFrame:FindFirstChild("OpenTransferButton") end
if transferFrame then 
	backBtn = transferFrame:FindFirstChild("BackButton") 
	withdrawBtn = transferFrame:FindFirstChild("WithdrawButton") 
end
local balanceLabelV2 = if transferFrame then transferFrame:FindFirstChild("BalanceLabelv2") else nil

-- ============================================================================
-- ðŸ“Š ABBREVIATION HELPER
-- ============================================================================
local SUFFIXES = {"K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc", "No", "Dc"}

local function formatNumber(n)
	n = tonumber(n)
	if not n then return "0" end
	if n < 1000 then return tostring(math.floor(n)) end
	local i = math.floor(math.log(n, 1000))
	local v = math.pow(1000, i)
	local suffix = SUFFIXES[i] or "?"
	return string.format("%.2f%s", n / v, suffix)
end

local function updateBalance()
	if not balanceLabelV2 then return end
	local leaderstats = player:FindFirstChild("leaderstats")
	local cashValue = leaderstats and leaderstats:FindFirstChild("Cash")
	if cashValue then
		balanceLabelV2.Text = "$" .. formatNumber(cashValue.Value) -- âœ… Using Suffixes now
	end
end

-- ============================================================================
-- ðŸ› ï¸ LOGIC
-- ============================================================================

local function playClickSound()
	local sound = Instance.new("Sound")
	sound.SoundId = CLICK_SOUND_ID
	sound.Volume = 0.5
	sound.Parent = SoundService
	sound:Play()
	game.Debris:AddItem(sound, 1)
end

local function setupHover(button)
	if not button then return end
	local originalColor = button.ImageColor3
	button.MouseEnter:Connect(function() TweenService:Create(button, TweenInfo.new(0.2), {ImageColor3 = DIM_COLOR}):Play() end)
	button.MouseLeave:Connect(function() TweenService:Create(button, TweenInfo.new(0.2), {ImageColor3 = originalColor}):Play() end)
end

local function openTransfer()
	playClickSound()
	if bankFrame then bankFrame.Visible = false end
	if transferFrame then transferFrame.Visible = true end
	updateBalance() 
end

local function closeTransfer()
	playClickSound()
	if transferFrame then transferFrame.Visible = false end
	if bankFrame then bankFrame.Visible = true end
end

-- CONNECT
setupHover(openTransferBtn)
setupHover(backBtn)
setupHover(withdrawBtn)

if openTransferBtn then openTransferBtn.MouseButton1Click:Connect(openTransfer) end
if backBtn then backBtn.MouseButton1Click:Connect(closeTransfer) end
if withdrawBtn then withdrawBtn.MouseButton1Click:Connect(function() playClickSound() end) end

if player:WaitForChild("leaderstats", 5) then
	player.leaderstats.Cash.Changed:Connect(updateBalance)
end

if transferFrame then transferFrame.Visible = false end
